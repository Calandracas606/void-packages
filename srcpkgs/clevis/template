# Template file for 'clevis'
pkgname=clevis
version=21
revision=1
build_style=meson
hostmakedepends="asciidoc bash-completion cryptsetup curl jq keyutils pkg-config tpm2-tools
 pcsclite opensc socat opensc-pkcs11"
makedepends="bash-completion cryptsetup-devel dracut jansson-devel
 jose-devel libaudit-devel luksmeta-devel udisks2-devel"
depends="bash cryptsetup curl libpwquality tpm2-tools jose"
short_desc="Pluggable framework for automated decryption"
maintainer="Johannes Heimansberg <git@jhe.dedyn.io>"
license="GPL-3.0-or-later WITH custom:OpenSSL-Exception"
homepage="https://github.com/latchset/clevis"
distfiles="https://github.com/latchset/clevis/archive/v$version/clevis-$version.tar.gz"
checksum=0ba38f0438337a799e98e1ab41ca30670cc8c13eb5f1f628b4680d46e2ef0013
make_check="ci-skip" # LUKS tests fail in CI pipeline

post_install() {
	vlicense COPYING.openssl
}
