# Template file for 'hidpipe'
pkgname=hidpipe
version=0.1.1
revision=1
build_style=cargo
hostmakedepends="pkg-config"
makedepends="eudev-libudev-devel"
short_desc="Pass input devices through to virtual machines"
maintainer="Daniel Martinez <danielmartinez@cock.li>"
license="MIT"
homepage="https://github.com/AsahiLinux/hidpipe"
distfiles="https://github.com/AsahiLinux/hidpipe/archive/refs/tags/v${version}.tar.gz"
checksum=0e64b25066c97d07f5b84bb7ab2f7257cae0205a2cd56c65bed2abcfc1e22362

if [ ! "$XBPS_TARGET_WORDSIZE" == 64 ]; then
	broken="mismatched types expected 'i64', found 'i32'"
fi

post_install() {
	vlicense LICENSE

	vinstall etc/systemd/user/hidpipe.socket 644 etc/systemd/user
	vinstall etc/systemd/user/hidpipe.service 644 etc/systemd/user
}
