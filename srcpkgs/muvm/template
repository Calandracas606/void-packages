# Template file for 'muvm'
pkgname=muvm
version=0.3.0
revision=1
build_style=cargo
hostmakedepends="llvm19-devel pkg-config"
makedepends="libkrun-devel eudev-libudev-devel"
depends="passt hidpipe"
short_desc="Run programs from your system in a microVM"
maintainer="Daniel Martinez <danielmartinez@cock.li>"
license="MIT AND Apache-2.0"
homepage="https://github.com/AsahiLinux/muvm"
distfiles="https://github.com/AsahiLinux/muvm/archive/refs/tags/muvm-${version}.tar.gz"
checksum=6505e63555687c21838d29de61de435fd7d4674e1b582fba4fa377c6fcb8274c

do_install() {
	vbin target/${RUST_TARGET}/release/muvm
	vbin target/${RUST_TARGET}/release/muvm-guest
}

post_install() {
	vlicense crates/muvm/LICENSE
}
