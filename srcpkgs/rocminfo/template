# Template file for 'rocminfo'
pkgname=rocminfo
version=6.3.0
revision=1
_rocm_prefix=usr/lib/rocm
build_style=cmake
configure_args=" -DROCRTST_BLD_TYPE=Release
 -DCMAKE_INSTALL_PREFIX=/${_rocm_prefix}
 -DCMAKE_PREFIX_PATH=${XBPS_CROSS_BASE}/${_rocm_prefix}"
makedepends="ROCm-cmake ROCr-Runtime-devel"
short_desc="ROCm Application for Reporting System Info"
maintainer="Daniel Martinez <danielmartinez@cock.li>"
license="NCSA"
homepage="https://github.com/ROCm/rocminfo"
distfiles="https://github.com/ROCm/rocminfo/archive/refs/tags/rocm-${version}.tar.gz"
checksum=40e2ef89e135770196022761cb929af93c80c41869082b3ef80e42b7772267d0

post_install() {
	vlicense License.txt
	vmkdir "usr/bin"
	for _f in ${DESTDIR}/${_rocm_prefix}/bin/*; do
		local _base=$(basename "${_f}")
		ln -s "../lib/rocm/bin/${_base}" "${DESTDIR}/usr/bin"
	done
}
