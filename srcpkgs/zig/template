# Template file for 'zig'
pkgname=zig
version=0.12.0.dev.1390
revision=1
archs="x86_64* aarch64*"
build_style=cmake
configure_args="-DZIG_TARGET_MCPU=baseline"
make_cmd=make
# we add xml2, zstd, zlib and ncurses
# because our lld is static-only and requires those to work
makedepends="clang llvm lld-devel libxml2-devel libzstd-devel ncurses-devel zlib-devel"
short_desc="Programming language designed for robustness, optimality, and clarity"
maintainer="Isaac Freund <mail@isaacfreund.com>"
license="MIT"
homepage="https://ziglang.org"
#distfiles="https://ziglang.org/download/${version}/zig-${version}.tar.xz"
# zig 12 needs llvm == 17
distfiles="https://ziglang.org/builds/zig-0.12.0-dev.1390+94cee4fb2.tar.xz"
checksum=621fc37bb70c4ce4e2edbbade19ef055404793e2289f6daed92c34269bcad1eb
nopie=yes
nocross=yes

export CMAKE_GENERATOR="Unix Makefiles"

post_install() {
	vlicense LICENSE
}
