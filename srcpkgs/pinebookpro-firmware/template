# Template file for 'pinebookpro-firmware'
pkgname=pinebookpro-firmware
version=0.0.20220515
revision=1
_manjaro_commit=056d5f6776e515f90bbbbead1be06857aaef17d0
archs="aarch64*"
short_desc="Firmware files for the Pinebook Pro"
maintainer="Orphaned <orphan@voidlinux.org>"
license="Apache-2.0"
homepage="https://gitlab.manjaro.org/manjaro-arm/packages/community/ap6256-firmware"
distfiles="https://gitlab.manjaro.org/manjaro-arm/packages/community/ap6256-firmware/-/archive/${_manjaro_commit}/ap6256-firmware-${_manjaro_commit}.tar.gz"
checksum=e933c27c68102b32cc0e4cb0ea69d8c95cc29d3efe486c4dd78e8af5a13520ad

do_install() {
	vinstall brcmfmac43456-sdio.clm_blob 644 usr/lib/firmware/brcm
	vinstall BCM4345C5.hcd 644 usr/lib/firmware/brcm
	vinstall fw_bcm43456c5_ag.bin 644 usr/lib/firmware/brcm brcmfmac43456-sdio.bin
	vinstall brcmfmac43456-sdio.AP6256.txt 644 usr/lib/firmware/brcm brcmfmac43456-sdio.txt

	for dev in pine64,pinebook-pro radxa,rockpi4b radxa,rockpi4c rockpro64-v2.1 rk3399-orangepi; do
		ln -sf brcmfmac43456-sdio.txt "${DESTDIR}/usr/lib/firmware/brcm/brcmfmac43456-sdio.${dev}.txt"
	done
}
