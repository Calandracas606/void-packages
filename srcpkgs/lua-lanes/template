# Template file for 'lua-lanes'
pkgname=lua-lanes
version=3.16.1
revision=1
build_style=gnu-makefile
make_use_env=yes
hostmakedepends="which pkg-config"
makedepends="$(vopt_if luajit LuaJIT-devel lua51-devel)"
short_desc="Lightweight, native, lazy evaluating multithreading library for Lua"
maintainer="Daniel Martinez <danielmartinez@cock.li>"
license="MIT"
homepage="https://lualanes.github.io/lanes/"
changelog="https://raw.githubusercontent.com/LuaLanes/lanes/v${version}/CHANGES"
distfiles="https://github.com/LuaLanes/lanes/archive/refs/tags/v${version}.tar.gz"
checksum=bff35696fe1502270e54523e89e9c2da29738a75d49aeb8237f6b47f4b7b14f2

build_options="luajit"

case "$XBPS_TARGET_MACHINE" in
	# luajit doesn't support riscv64 (yet)
	riscv64*) ;;
	*) build_options_default="luajit" ;;
esac

do_install() {
	make install DESTDIR=${DESTDIR}/usr
}

post_install() {
	vlicense COPYRIGHT
}
